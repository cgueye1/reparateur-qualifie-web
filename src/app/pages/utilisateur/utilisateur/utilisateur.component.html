<div class="w-full">

  <!-- TITRE + SOUS-TITRE -->
  <div class="mb-6 ">
    <h1 class="text-3xl font-semibold text-[#343A40]">Utilisateurs</h1>
    <p class="text-[#343A40] font-light mt-1">Validation des comptes clients et artisans</p>
  </div>

  <!-- CARTES -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">

    <!-- CARD 1 : Total utilisateurs -->
    <div class="bg-white rounded-2xl shadow-sm p-4 flex flex-col justify-between">
      <div class="flex items-start justify-between">
        <p class="text-xs text-gray-500">Total utilisateurs</p>

        <!-- Ic√¥ne vide -->
        <div class="bg-white rounded-lg shadow p-1.5 w-9 h-9 flex items-center justify-center">
          <div class="icon">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M15.9267 17.211H18.0647C18.2528 17.2139 18.4388 17.1713 18.6068 17.0868C18.7748 17.0022 18.9198 16.8782 19.0295 16.7254C19.1391 16.5726 19.2102 16.3955 19.2365 16.2093C19.2628 16.0231 19.2437 15.8332 19.1807 15.656C18.6356 14.4891 17.7725 13.4996 16.6905 12.8009C15.6086 12.1022 14.3515 11.7228 13.0637 11.706M13.0637 8.947C13.545 8.94713 14.0215 8.85246 14.4662 8.66838C14.9108 8.48431 15.3149 8.21444 15.6552 7.87419C15.9955 7.53395 16.2655 7.12998 16.4497 6.68538C16.6339 6.24078 16.7287 5.76425 16.7287 5.283C16.73 4.80091 16.6362 4.3233 16.4526 3.87755C16.269 3.43179 15.9992 3.02665 15.6587 2.68534C15.3183 2.34403 14.9138 2.07327 14.4685 1.88857C14.0232 1.70387 13.5458 1.60887 13.0637 1.609M7.33872 9.062C8.44046 9.05935 9.49616 8.61976 10.2742 7.83968C11.0522 7.0596 11.489 6.00274 11.4887 4.901C11.4887 3.80009 11.0514 2.74426 10.2729 1.9658C9.49446 1.18734 8.43863 0.75 7.33772 0.75C6.23681 0.75 5.18098 1.18734 4.40252 1.9658C3.62406 2.74426 3.18672 3.80009 3.18672 4.901C3.18672 6.00274 3.62377 7.05949 4.40197 7.83939C5.18018 8.61928 6.23598 9.05862 7.33772 9.061M12.0237 18.404C12.376 18.4035 12.7212 18.3055 13.0212 18.1209C13.3211 17.9363 13.5642 17.6723 13.7233 17.358C13.8824 17.0438 13.9515 16.6916 13.9228 16.3406C13.8941 15.9895 13.7688 15.6532 13.5607 15.369C12.8318 14.4015 11.8935 13.6114 10.816 13.0579C9.73849 12.5044 8.54972 12.2019 7.33872 12.173C6.12763 12.202 4.93881 12.5047 3.8613 13.0584C2.78378 13.612 1.84549 14.4023 1.11672 15.37C0.909375 15.6542 0.784619 15.9903 0.756227 16.341C0.727834 16.6916 0.79691 17.0434 0.955827 17.3573C1.11474 17.6712 1.35732 17.935 1.65677 18.1198C1.95621 18.3045 2.30088 18.4028 2.65272 18.404H12.0237Z"
                stroke="#343A40" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>

          </div>
        </div>
      </div>

      <h2 class="text-xl font-bold text-[#111111]">{{ usersStatsCounter?.totalUsers }}</h2>

      <div class="flex items-center gap-2 mt-2">
        <span class="text-green-600 font-bold text-sm">
          <svg width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M2.24191 0.194433C2.12129 0.315054 2.0474 0.482675 2.04764 0.666759L2.04764 0.747781C2.04764 1.11642 2.34607 1.41485 2.71423 1.41438L6.35657 1.41438L0.195165 7.57578C-0.0650507 7.836 -0.0650507 8.25837 0.195165 8.51859C0.45538 8.77881 0.877758 8.77881 1.13797 8.51859L7.29938 2.35719L7.29938 5.99952C7.29938 6.36816 7.59781 6.66659 7.96597 6.66612L8.047 6.66612C8.41563 6.66612 8.71406 6.36769 8.71359 5.99952L8.71359 0.666759C8.71359 0.298121 8.41516 -0.000307871 8.047 0.000163525L2.71423 0.000163287C2.52991 0.000163229 2.36253 0.0738129 2.24191 0.194433Z"
              fill="#008D36" />
          </svg>

        </span>
        <span class="text-xs font-light text-green-600 ml-1">{{ usersStatsCounter?.evolutionPercentage| number:'1.0-1'
          }}%</span>
        <span class="text-xs text-[#64748B] font-light ml-2">ce mois</span>
      </div>
    </div>

    <!-- CARD 2 : Artisans -->
    <div class="bg-white rounded-2xl shadow-sm p-4 flex flex-col justify-between">
      <div class="flex items-start justify-between">
        <p class="text-xs text-gray-500">
          {{ artisanStats?.profile | lowercase | titlecase }}
        </p>


        <!-- Ic√¥ne vide -->
        <div class="bg-white rounded-lg shadow p-1.5 w-9 h-9 flex items-center justify-center">
          <div class="icon">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M15.9267 17.211H18.0647C18.2528 17.2139 18.4388 17.1713 18.6068 17.0868C18.7748 17.0022 18.9198 16.8782 19.0295 16.7254C19.1391 16.5726 19.2102 16.3955 19.2365 16.2093C19.2628 16.0231 19.2437 15.8332 19.1807 15.656C18.6356 14.4891 17.7725 13.4996 16.6905 12.8009C15.6086 12.1022 14.3515 11.7228 13.0637 11.706M13.0637 8.947C13.545 8.94713 14.0215 8.85246 14.4662 8.66838C14.9108 8.48431 15.3149 8.21444 15.6552 7.87419C15.9955 7.53395 16.2655 7.12998 16.4497 6.68538C16.6339 6.24078 16.7287 5.76425 16.7287 5.283C16.73 4.80091 16.6362 4.3233 16.4526 3.87755C16.269 3.43179 15.9992 3.02665 15.6587 2.68534C15.3183 2.34403 14.9138 2.07327 14.4685 1.88857C14.0232 1.70387 13.5458 1.60887 13.0637 1.609M7.33872 9.062C8.44046 9.05935 9.49616 8.61976 10.2742 7.83968C11.0522 7.0596 11.489 6.00274 11.4887 4.901C11.4887 3.80009 11.0514 2.74426 10.2729 1.9658C9.49446 1.18734 8.43863 0.75 7.33772 0.75C6.23681 0.75 5.18098 1.18734 4.40252 1.9658C3.62406 2.74426 3.18672 3.80009 3.18672 4.901C3.18672 6.00274 3.62377 7.05949 4.40197 7.83939C5.18018 8.61928 6.23598 9.05862 7.33772 9.061M12.0237 18.404C12.376 18.4035 12.7212 18.3055 13.0212 18.1209C13.3211 17.9363 13.5642 17.6723 13.7233 17.358C13.8824 17.0438 13.9515 16.6916 13.9228 16.3406C13.8941 15.9895 13.7688 15.6532 13.5607 15.369C12.8318 14.4015 11.8935 13.6114 10.816 13.0579C9.73849 12.5044 8.54972 12.2019 7.33872 12.173C6.12763 12.202 4.93881 12.5047 3.8613 13.0584C2.78378 13.612 1.84549 14.4023 1.11672 15.37C0.909375 15.6542 0.784619 15.9903 0.756227 16.341C0.727834 16.6916 0.79691 17.0434 0.955827 17.3573C1.11474 17.6712 1.35732 17.935 1.65677 18.1198C1.95621 18.3045 2.30088 18.4028 2.65272 18.404H12.0237Z"
                stroke="#343A40" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </div>
        </div>
      </div>

      <h2 class="text-xl font-bold text-[#111111]">{{artisanStats?.count}}</h2>

      <div class="flex items-center gap-2 mt-2">
        <span class="text-green-600 font-bold text-sm">
          <svg width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M2.24191 0.194433C2.12129 0.315054 2.0474 0.482675 2.04764 0.666759L2.04764 0.747781C2.04764 1.11642 2.34607 1.41485 2.71423 1.41438L6.35657 1.41438L0.195165 7.57578C-0.0650507 7.836 -0.0650507 8.25837 0.195165 8.51859C0.45538 8.77881 0.877758 8.77881 1.13797 8.51859L7.29938 2.35719L7.29938 5.99952C7.29938 6.36816 7.59781 6.66659 7.96597 6.66612L8.047 6.66612C8.41563 6.66612 8.71406 6.36769 8.71359 5.99952L8.71359 0.666759C8.71359 0.298121 8.41516 -0.000307871 8.047 0.000163525L2.71423 0.000163287C2.52991 0.000163229 2.36253 0.0738129 2.24191 0.194433Z"
              fill="#008D36" />
          </svg>
        </span>
        <span class="text-xs font-light text-green-600 ml-1">
          +{{ artisanStats?.percentage | number:'1.0-1' }}%
        </span>

        <span class="text-xs text-[#64748B] font-light ml-2">ce mois</span>
      </div>
    </div>

    <!-- CARD 3 : Clients -->
    <div class="bg-white rounded-2xl shadow-sm p-4 flex flex-col justify-between">
      <div class="flex items-start justify-between">
        <p class="text-xs text-gray-500">{{clientStats?.profile | lowercase | titlecase}}</p>

        <!-- Ic√¥ne vide -->
        <div class="bg-white rounded-lg shadow p-1.5 w-9 h-9 flex items-center justify-center">
          <div class="icon">
            <svg width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M1.59235 7.75V16.75C1.59235 17.2804 1.80306 17.7891 2.17813 18.1642C2.55321 18.5393 3.06191 18.75 3.59235 18.75H17.5923C18.1228 18.75 18.6315 18.5393 19.0066 18.1642C19.3816 17.7891 19.5923 17.2804 19.5923 16.75V7.75"
                stroke="#E94E1B" stroke-width="1.5" />
              <path
                d="M13.4254 18.75V12.75C13.4254 12.2196 13.2146 11.7109 12.8396 11.3358C12.4645 10.9607 11.9558 10.75 11.4254 10.75H9.42535C8.89492 10.75 8.38621 10.9607 8.01114 11.3358C7.63607 11.7109 7.42535 12.2196 7.42535 12.75V18.75"
                stroke="#E94E1B" stroke-width="1.5" stroke-miterlimit="16" />
              <path
                d="M20.4103 7.114L18.7163 1.185C18.6805 1.05965 18.6048 0.949385 18.5007 0.870898C18.3966 0.792411 18.2697 0.749971 18.1393 0.75H14.0923L14.5673 6.454C14.5747 6.54568 14.6037 6.63429 14.6521 6.71254C14.7004 6.79078 14.7666 6.85641 14.8453 6.904C15.2353 7.137 15.9973 7.567 16.5923 7.75C17.6083 8.063 19.0923 7.95 19.9383 7.846C20.0206 7.83537 20.0995 7.80692 20.1696 7.76263C20.2398 7.71835 20.2994 7.65929 20.3443 7.5896C20.3893 7.5199 20.4184 7.44123 20.4299 7.35909C20.4413 7.27695 20.4346 7.19331 20.4103 7.114Z"
                stroke="#E94E1B" stroke-width="1.5" />
              <path
                d="M12.5923 7.75C13.1603 7.575 13.8803 7.176 14.2823 6.938C14.3759 6.88205 14.4518 6.80087 14.5013 6.70377C14.5508 6.60667 14.572 6.49757 14.5623 6.389L14.0923 0.75H7.09235L6.62235 6.389C6.61252 6.49774 6.63359 6.60704 6.68312 6.70433C6.73265 6.80163 6.80864 6.88297 6.90235 6.939C7.30435 7.176 8.02435 7.575 8.59235 7.75C10.0853 8.21 11.0993 8.21 12.5923 7.75Z"
                stroke="#E94E1B" stroke-width="1.5" />
              <path
                d="M2.46834 1.185L0.774337 7.115C0.750427 7.19418 0.744034 7.27762 0.755604 7.35951C0.767175 7.44141 0.79643 7.51981 0.84134 7.58927C0.886249 7.65873 0.945737 7.71758 1.01567 7.76174C1.08561 7.8059 1.16432 7.83431 1.24634 7.845C2.09134 7.95 3.57634 8.062 4.59234 7.75C5.18734 7.567 5.95034 7.137 6.33934 6.905C6.41817 6.85731 6.4845 6.79153 6.53284 6.7131C6.58119 6.63467 6.61015 6.54585 6.61734 6.454L7.09234 0.75H3.04534C2.91496 0.749971 2.78812 0.792411 2.68401 0.870898C2.5799 0.949385 2.50419 1.05965 2.46834 1.185Z"
                stroke="#E94E1B" stroke-width="1.5" />
            </svg>

          </div>
        </div>
      </div>

      <h2 class="text-xl font-bold text-[#111111]">{{clientStats?.count}}</h2>

      <div class="flex items-center gap-2 mt-2">
        <span class="text-green-600 font-bold text-sm">
          <svg width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M2.24191 0.194433C2.12129 0.315054 2.0474 0.482675 2.04764 0.666759L2.04764 0.747781C2.04764 1.11642 2.34607 1.41485 2.71423 1.41438L6.35657 1.41438L0.195165 7.57578C-0.0650507 7.836 -0.0650507 8.25837 0.195165 8.51859C0.45538 8.77881 0.877758 8.77881 1.13797 8.51859L7.29938 2.35719L7.29938 5.99952C7.29938 6.36816 7.59781 6.66659 7.96597 6.66612L8.047 6.66612C8.41563 6.66612 8.71406 6.36769 8.71359 5.99952L8.71359 0.666759C8.71359 0.298121 8.41516 -0.000307871 8.047 0.000163525L2.71423 0.000163287C2.52991 0.000163229 2.36253 0.0738129 2.24191 0.194433Z"
              fill="#008D36" />
          </svg>

        </span>
        <span class="text-xs font-light text-green-600 ml-1">{{clientStats?.percentage | number:'1.0-1' }}%</span>
        <span class="text-xs text-[#64748B] font-light ml-2">ce mois</span>
      </div>
    </div>

    <!-- CARD 4 : Comptes actifs -->
    <div class="bg-white rounded-2xl shadow-sm p-4 flex flex-col justify-between">
      <div class="flex items-start justify-between">
        <p class="text-xs text-gray-500">Comptes actifs</p>

        <!-- Ic√¥ne vide -->
        <div class="bg-white rounded-lg shadow p-1.5 w-9 h-9 flex items-center justify-center">
          <div class="icon">
            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M15.75 21C17.1424 21 18.4777 20.4469 19.4623 19.4623C20.4469 18.4777 21 17.1424 21 15.75C21 14.3576 20.4469 13.0223 19.4623 12.0377C18.4777 11.0531 17.1424 10.5 15.75 10.5C14.3576 10.5 13.0223 11.0531 12.0377 12.0377C11.0531 13.0223 10.5 14.3576 10.5 15.75C10.5 17.1424 11.0531 18.4777 12.0377 19.4623C13.0223 20.4469 14.3576 21 15.75 21ZM18.2685 14.2605L16.266 17.5995C16.178 17.7462 16.0577 17.8709 15.9143 17.9641C15.7708 18.0573 15.608 18.1166 15.4382 18.1374C15.2684 18.1582 15.0961 18.1401 14.9344 18.0843C14.7727 18.0285 14.6258 17.9366 14.505 17.8155L13.344 16.656C13.2032 16.5152 13.1241 16.3242 13.1241 16.125C13.1241 15.9258 13.2032 15.7348 13.344 15.594C13.4848 15.4532 13.6758 15.3741 13.875 15.3741C14.0742 15.3741 14.2652 15.4532 14.406 15.594L15.2265 16.416L16.9815 13.4895C17.0321 13.405 17.0989 13.3313 17.178 13.2726C17.2571 13.2139 17.347 13.1713 17.4426 13.1474C17.5381 13.1234 17.6375 13.1185 17.7349 13.133C17.8323 13.1474 17.926 13.1809 18.0105 13.2315C18.095 13.2821 18.1687 13.3489 18.2274 13.428C18.2861 13.5071 18.3287 13.597 18.3526 13.6926C18.3766 13.7881 18.3815 13.8875 18.367 13.9849C18.3526 14.0823 18.3191 14.176 18.2685 14.2605ZM13.5 4.5C13.5 5.69347 13.0259 6.83807 12.182 7.68198C11.3381 8.52589 10.1935 9 9 9C7.80653 9 6.66193 8.52589 5.81802 7.68198C4.97411 6.83807 4.5 5.69347 4.5 4.5C4.5 3.30653 4.97411 2.16193 5.81802 1.31802C6.66193 0.474106 7.80653 0 9 0C10.1935 0 11.3381 0.474106 12.182 1.31802C13.0259 2.16193 13.5 3.30653 13.5 4.5ZM9 7.5C9.79565 7.5 10.5587 7.18393 11.1213 6.62132C11.6839 6.05871 12 5.29565 12 4.5C12 3.70435 11.6839 2.94129 11.1213 2.37868C10.5587 1.81607 9.79565 1.5 9 1.5C8.20435 1.5 7.44129 1.81607 6.87868 2.37868C6.31607 2.94129 6 3.70435 6 4.5C6 5.29565 6.31607 6.05871 6.87868 6.62132C7.44129 7.18393 8.20435 7.5 9 7.5Z"
                fill="#008D36" />
              <path
                d="M9.384 18C9.21225 17.5128 9.097 17.0075 9.0405 16.494H1.5C1.5015 16.125 1.731 15.015 2.748 13.998C3.726 13.02 5.5665 12 9 12C9.39 12 9.76 12.0125 10.11 12.0375C10.449 11.526 10.854 11.0625 11.316 10.6605C10.616 10.5555 9.844 10.502 9 10.5C1.5 10.5 0 15 0 16.5C0 18 1.5 18 1.5 18H9.384Z"
                fill="#008D36" />
            </svg>

          </div>
        </div>
      </div>

      <h2 class="text-xl font-bold text-[#111111]">{{usersStatsCounter?.activeUsers}}</h2>

      <div class="flex items-center gap-2 mt-2">
        <span class=" font-light text-xs text-[#64748B]">Total</span>
      </div>
    </div>

  </div>

  <!-- ========================= -->
  <!--   BARRE RECHERCHE/FILTRE  -->
  <!-- ========================= -->
  <div class="bg-white rounded-xl shadow-sm p-5 mt-5 mb-6">

    <div class="w-full mb-5 flex flex-col lg:flex-row items-center justify-between gap-3">

      <!-- Champ de recherche -->
      <div class="flex items-center w-full lg:w-auto border border-[#EEEEEE] rounded-lg px-3 py-2 bg-white">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-2">
          <path
            d="M13.1539 12.2073L10.6806 9.75393C11.6407 8.55687 12.1056 7.03747 11.9798 5.50813C11.854 3.9788 11.147 2.55579 10.0043 1.5317C8.86151 0.507604 7.3698 -0.0397263 5.83588 0.00224731C4.30196 0.0442209 2.84241 0.672308 1.75736 1.75736C0.672308 2.84241 0.0442209 4.30196 0.00224731 5.83588C-0.0397263 7.3698 0.507604 8.86151 1.5317 10.0043C2.55579 11.147 3.9788 11.854 5.50813 11.9798C7.03747 12.1056 8.55687 11.6407 9.75393 10.6806L12.2073 13.1339C12.2692 13.1964 12.343 13.246 12.4242 13.2799C12.5055 13.3137 12.5926 13.3311 12.6806 13.3311C12.7686 13.3311 12.8557 13.3137 12.937 13.2799C13.0182 13.246 13.092 13.1964 13.1539 13.1339C13.2741 13.0096 13.3413 12.8435 13.3413 12.6706C13.3413 12.4977 13.2741 12.3316 13.1539 12.2073ZM6.01393 10.6806C5.09095 10.6806 4.1887 10.4069 3.42127 9.89412C2.65384 9.38134 2.0557 8.65251 1.7025 7.79979C1.34929 6.94707 1.25687 6.00876 1.43694 5.10351C1.617 4.19827 2.06146 3.36675 2.7141 2.7141C3.36675 2.06146 4.19827 1.617 5.10351 1.43694C6.00876 1.25687 6.94707 1.34929 7.79979 1.7025C8.65251 2.0557 9.38134 2.65384 9.89412 3.42127C10.4069 4.1887 10.6806 5.09095 10.6806 6.01393C10.6806 7.25161 10.1889 8.43859 9.31376 9.31376C8.43859 10.1889 7.25161 10.6806 6.01393 10.6806Z"
            fill="#777777" />
        </svg>
        <input type="text" [(ngModel)]="searchTerm" placeholder="Rechercher un utilisateur"
          class="w-full outline-none text-sm" />

      </div>

      <!-- Filtres -->
      <div class="flex items-center gap-3">

        <!-- FILTRE STATUT -->
        <div class="relative">

          <!-- Bouton -->
          <button (click)="toggleStatusDropdown()"
            class="border border-[#EEEEEE] rounded-lg px-4 py-2 bg-white text-sm flex items-center gap-2 font-medium text-[#333333]">

            <svg width="14" height="10" viewBox="0 0 14 10" fill="none">
              <path d="M0.625 0.625H13.125M2.70833 4.79167H11.0417M5.20833 8.95833H8.54167" stroke="#777777"
                stroke-width="1.25" stroke-linecap="round" />
            </svg>

            {{ selectedStatusLabel }}
          </button>

          <!-- Dropdown -->
          <div *ngIf="showStatusDropdown"
            class="absolute z-20 mt-2 w-44 bg-white border border-[#EEEEEE] rounded-lg shadow-md">

            <button (click)="setStatusFilter('ALL'); selectedStatusLabel='Tous les statuts'; showStatusDropdown=false"
              class="w-full text-left px-4 py-2 text-sm hover:bg-gray-50">
              Tous
            </button>

            <button (click)="setStatusFilter('ACTIVE'); selectedStatusLabel='Actifs'; showStatusDropdown=false"
              class="w-full text-left px-4 py-2 text-sm hover:bg-gray-50 text-[#008D36]">
              Actifs
            </button>

            <button (click)="setStatusFilter('INACTIVE'); selectedStatusLabel='D√©sactiv√©s'; showStatusDropdown=false"
              class="w-full text-left px-4 py-2 text-sm hover:bg-gray-50 text-[#FF2828]">
              D√©sactiv√©s
            </button>

          </div>
        </div>


        <!-- FILTRE PROFIL -->
        <div class="relative">

          <!-- Bouton -->
          <button (click)="toggleTypeDropdown()"
            class="border border-gray-300 rounded-lg px-4 py-2 bg-white text-sm flex items-center gap-2 font-medium text-[#333333]">

            <svg width="14" height="10" viewBox="0 0 14 10" fill="none">
              <path d="M0.625 0.625H13.125M2.70833 4.79167H11.0417M5.20833 8.95833H8.54167" stroke="#777777"
                stroke-width="1.25" stroke-linecap="round" />
            </svg>

            {{ selectedTypeLabel }}
          </button>

          <!-- Dropdown -->
          <div *ngIf="showTypeDropdown"
            class="absolute z-20 mt-2 w-44 bg-white border border-gray-200 rounded-lg shadow-md">

            <button (click)="setTypeFilter('ALL'); selectedTypeLabel='Tous les types'; showTypeDropdown=false"
              class="w-full text-left px-4 py-2 text-sm hover:bg-gray-50">
              Tous
            </button>

            <button (click)="setTypeFilter('ADMIN'); selectedTypeLabel='Admin'; showTypeDropdown=false"
              class="w-full text-left px-4 py-2 text-sm hover:bg-gray-50">
              Admin
            </button>

            <button (click)="setTypeFilter('ARTISAN'); selectedTypeLabel='Artisan'; showTypeDropdown=false"
              class="w-full text-left px-4 py-2 text-sm hover:bg-gray-50">
              Artisan
            </button>

            <button (click)="setTypeFilter('CLIENT'); selectedTypeLabel='Client'; showTypeDropdown=false"
              class="w-full text-left px-4 py-2 text-sm hover:bg-gray-50">
              Client
            </button>

          </div>
        </div>

      </div>

    </div>

    <!-- ========================= -->
    <!-- üßæ TABLEAU DES UTILISATEURS -->
    <!-- ========================= -->
    <div class="bg-white rounded-xl overflow-x-auto border border-gray-200">

      <table class="w-full min-w-max">
        <thead class="bg-gray-50">
          <tr class="text-left text-xs font-medium text-gray-600 border-b border-gray-200">
            <th class="py-3 px-3" style="min-width: 200px;">Nom</th>
            <th class="py-3 px-3" style="min-width: 120px;">Profil</th>
            <th class="py-3 px-3" style="min-width: 120px;">T√©l√©phone</th>

            <!-- ‚ùå Pas dans l‚ÄôAPI -->
            <!-- <th class="py-3 px-3">Derni√®re connexion</th> -->

            <th class="py-3 px-3" style="min-width: 100px;">Statut</th>
            <th class="py-3 px-3" style="min-width: 100px;">Actions</th>
          </tr>
        </thead>

        <tbody class="bg-white divide-y divide-gray-100">

          <tr *ngFor="let user of filteredUsers" class="hover:bg-gray-50 transition-colors">

            <!-- NOM -->
            <td class="py-3 px-3">
              <div class="min-w-0">
                <p class="font-medium text-xs text-[#111111] truncate">
                  {{ user.nom }} {{ user.prenom }}
                </p>

                <!-- ‚ùå m√©tier affich√© seulement si ARTISAN -->
                <p *ngIf="user.trade" class="text-[10px] text-gray-500 truncate">
                  {{ user.trade.name }}
                </p>
              </div>
            </td>

            <!-- TYPE -->
            <td class="py-3 px-3 text-xs text-[#111111]">
              {{ user.profil }}
            </td>

            <!-- T√âL√âPHONE -->
            <td class="py-3 px-3 text-xs text-[#111111]">
              {{ user.telephone }}
            </td>

            <!-- ‚ùå DERNI√àRE CONNEXION NON FOURNIE -->
            <!--
      <td class="py-3 px-3 text-xs text-gray-500">
        {{ user.lastLogin }}
      </td>
      -->

            <!-- STATUT -->
            <td class="py-3 px-3">
              <span
                class="px-2 py-1 rounded-full text-[10px] font-medium inline-flex items-center gap-1 whitespace-nowrap"
                [ngClass]="user.activated
      ? 'bg-[#008D3614] text-[#008D36]'
      : 'bg-[#FF282814] text-[#FF2828]'">

                <!-- üî¥ / üü¢ Petit point -->
                <span class="w-1.5 h-1.5 rounded-full" [ngClass]="user.activated
        ? 'bg-[#008D36]'
        : 'bg-[#FF2828]'">
                </span>

                {{ user.activated ? 'Active' : 'D√©sactiv√©' }}
              </span>
            </td>


            <!-- ACTIONS -->
            <td class="py-3 px-3">
              <div class="flex items-center gap-4">

                <!-- üëÅÔ∏è VOIR (placeholder simple) -->
                <button [routerLink]="
  user.profil === 'ARTISAN'
    ? ['/utilisateurs/detail-artisan', user.id]
    : ['/utilisateurs/detail-client', user.id]
" class="text-gray-600 hover:opacity-70" title="Voir">
                  <svg width="20" height="14" viewBox="0 0 20 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M20 6.875C20 6.875 16.25 0 10 0C3.75 0 0 6.875 0 6.875C0 6.875 3.75 13.75 10 13.75C16.25 13.75 20 6.875 20 6.875ZM1.46625 6.875C2.06973 5.95573 2.76496 5.1001 3.54125 4.32125C5.15 2.71 7.35 1.25 10 1.25C12.65 1.25 14.8488 2.71 16.46 4.32125C17.2363 5.1001 17.9315 5.95573 18.535 6.875C18.4633 6.98333 18.3821 7.10333 18.2913 7.235C17.8725 7.835 17.2537 8.635 16.46 9.42875C14.8488 11.04 12.6488 12.5 10 12.5C7.35125 12.5 5.15125 11.04 3.54 9.42875C2.76371 8.6499 2.06973 7.79427 1.46625 6.875Z"
                      fill="#6B7280" />
                    <path
                      d="M10 3.75C9.1712 3.75 8.37634 4.07924 7.79029 4.66529C7.20424 5.25134 6.875 6.0462 6.875 6.875C6.875 7.7038 7.20424 8.49866 7.79029 9.08471C8.37634 9.67076 9.1712 10 10 10C10.8288 10 11.6237 9.67076 12.2097 9.08471C12.7958 8.49866 13.125 7.7038 13.125 6.875C13.125 6.0462 12.7958 5.25134 12.2097 4.66529C11.6237 4.07924 10.8288 3.75 10 3.75ZM5.625 6.875C5.625 5.71468 6.08594 4.60188 6.90641 3.78141C7.72688 2.96094 8.83968 2.5 10 2.5C11.1603 2.5 12.2731 2.96094 13.0936 3.78141C13.9141 4.60188 14.375 5.71468 14.375 6.875C14.375 8.03532 13.9141 9.14812 13.0936 9.96859C12.2731 10.7891 11.1603 11.25 10 11.25C8.83968 11.25 7.72688 10.7891 6.90641 9.96859C6.08594 9.14812 5.625 8.03532 5.625 6.875Z"
                      fill="#6B7280" />
                  </svg>

                </button>

                <!-- ‚úÖ ACTIVER -->
                <button *ngIf="!user.activated" (click)="toggleStatus(user)" class="text-green-600 hover:opacity-70"
                  title="Activer">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M15 0C16.3261 0 17.5979 0.526784 18.5355 1.46447C19.4732 2.40215 20 3.67392 20 5V8.125H18.75V5C18.75 4.00544 18.3549 3.05161 17.6517 2.34835C16.9484 1.64509 15.9946 1.25 15 1.25C14.0054 1.25 13.0516 1.64509 12.3483 2.34835C11.6451 3.05161 11.25 4.00544 11.25 5V7.5H11.875C12.2854 7.5 12.6917 7.58083 13.0709 7.73788C13.45 7.89492 13.7945 8.12511 14.0847 8.41529C14.3749 8.70547 14.6051 9.04997 14.7621 9.42911C14.9192 9.80826 15 10.2146 15 10.625V16.875C15 17.2854 14.9192 17.6917 14.7621 18.0709C14.6051 18.45 14.3749 18.7945 14.0847 19.0847C13.7945 19.3749 13.45 19.6051 13.0709 19.7621C12.6917 19.9192 12.2854 20 11.875 20H3.125C2.2962 20 1.50134 19.6708 0.915291 19.0847C0.32924 18.4987 0 17.7038 0 16.875L0 10.625C0 9.7962 0.32924 9.00134 0.915291 8.41529C1.50134 7.82924 2.2962 7.5 3.125 7.5H10V5C10 3.67392 10.5268 2.40215 11.4645 1.46447C12.4021 0.526784 13.6739 0 15 0ZM3.125 8.75C2.62772 8.75 2.15081 8.94754 1.79917 9.29917C1.44754 9.65081 1.25 10.1277 1.25 10.625V16.875C1.25 17.3723 1.44754 17.8492 1.79917 18.2008C2.15081 18.5525 2.62772 18.75 3.125 18.75H11.875C12.3723 18.75 12.8492 18.5525 13.2008 18.2008C13.5525 17.8492 13.75 17.3723 13.75 16.875V10.625C13.75 10.1277 13.5525 9.65081 13.2008 9.29917C12.8492 8.94754 12.3723 8.75 11.875 8.75H3.125Z"
                      fill="#008D36" />
                  </svg>

                </button>

                <!-- ‚ùå D√âSACTIVER -->
                <button *ngIf="user.activated" (click)="toggleStatus(user)" class="text-red-600 hover:opacity-70"
                  title="D√©sactiver">
                  <svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M7.5 0C8.82608 0 10.0979 0.526784 11.0355 1.46447C11.9732 2.40215 12.5 3.67392 12.5 5V7.5625C13.2059 7.70658 13.8402 8.09011 14.2958 8.64819C14.7514 9.20626 15.0001 9.90459 15 10.625V16.875C15 17.7038 14.6708 18.4987 14.0847 19.0847C13.4987 19.6708 12.7038 20 11.875 20H3.125C2.2962 20 1.50134 19.6708 0.915291 19.0847C0.32924 18.4987 6.51427e-08 17.7038 6.51427e-08 16.875V10.625C-0.000146969 9.90459 0.248615 9.20626 0.704184 8.64819C1.15975 8.09011 1.79415 7.70658 2.5 7.5625V5C2.5 3.67392 3.02678 2.40215 3.96447 1.46447C4.90215 0.526784 6.17392 0 7.5 0ZM3.125 8.75C2.62772 8.75 2.15081 8.94754 1.79917 9.29917C1.44754 9.65081 1.25 10.1277 1.25 10.625V16.875C1.25 17.3723 1.44754 17.8492 1.79917 18.2008C2.15081 18.5525 2.62772 18.75 3.125 18.75H11.875C12.3723 18.75 12.8492 18.5525 13.2008 18.2008C13.5525 17.8492 13.75 17.3723 13.75 16.875V10.625C13.75 10.1277 13.5525 9.65081 13.2008 9.29917C12.8492 8.94754 12.3723 8.75 11.875 8.75H3.125ZM7.5 1.25C6.50544 1.25 5.55161 1.64509 4.84835 2.34835C4.14509 3.05161 3.75 4.00544 3.75 5V7.5H11.25V5C11.25 4.00544 10.8549 3.05161 10.1517 2.34835C9.44839 1.64509 8.49456 1.25 7.5 1.25Z"
                      fill="#E94E1B" />
                  </svg>


                </button>

              </div>
            </td>

          </tr>

        </tbody>
      </table>

    </div>

    <!-- ========================= -->
    <!-- üî¢ PAGINATION -->
    <!-- ========================= -->
    <div class="bg-white rounded-xl p-4 flex justify-between items-center mt-4">

      <!-- √âl√©ments par page -->
      <div class="flex items-center gap-2 text-sm text-gray-600">
        <span>√©l√©ments par page :</span>

        <select class="border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:outline-none" [(ngModel)]="size"
          (change)="onSizeChange()">
          <option [value]="10">10</option>
          <option [value]="25">25</option>
          <option [value]="50">50</option>
        </select>
      </div>

      <!-- Info pagination + fl√®ches -->
      <div class="flex items-center gap-4 text-sm text-gray-700">

        <!-- Texte dynamique -->
        <span>
          {{ startIndex }} ‚Äì {{ endIndex }} sur {{ totalElements }}
        </span>

        <div class="flex items-center gap-2">
          <!-- ‚¨ÖÔ∏è Pr√©c√©dent -->
          <button (click)="prevPage()" [disabled]="page === 0"
            class="text-gray-400 hover:text-gray-600 p-1 disabled:opacity-30">
            ‚Äπ
          </button>

          <!-- ‚û°Ô∏è Suivant -->
          <button (click)="nextPage()" [disabled]="page + 1 >= totalPages"
            class="text-gray-400 hover:text-gray-600 p-1 disabled:opacity-30">
            ‚Ä∫
          </button>
        </div>

      </div>
    </div>


  </div>

</div>
















<!-- POPUP ACTIVER -->
<div *ngIf="showActivatePopup" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50">
  <div class="bg-white rounded-2xl px-10 py-12 w-[460px] text-center shadow-xl">

    <div class="w-16 h-16 mx-auto mb-6 flex items-center justify-center">
      <svg width="95" height="95" viewBox="0 0 95 95" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M51.2407 58.166L43.8188 58.166L43.8188 28.4785L51.2407 28.4785L51.2407 58.166Z" fill="#EFBD8E" />
        <path
          d="M47.5 65.291C45.3685 65.291 43.6406 67.0189 43.6406 69.1504C43.6406 71.2819 45.3685 73.0098 47.5 73.0098C49.6315 73.0098 51.3594 71.2819 51.3594 69.1504C51.3594 67.0189 49.6315 65.291 47.5 65.291Z"
          fill="#EFBD8E" />
        <path
          d="M47.5 94.9776C59.6972 95.3703 71.5436 90.595 80.446 81.6968C89.3483 72.7986 94.5815 60.5025 95 47.5C94.5815 34.4975 89.3483 22.2014 80.446 13.3032C71.5436 4.40504 59.6972 -0.370316 47.5 0.0224457C35.3028 -0.370316 23.4564 4.40504 14.554 13.3032C5.65166 22.2014 0.418472 34.4975 0 47.5C0.418472 60.5025 5.65166 72.7986 14.554 81.6968C23.4564 90.595 35.3028 95.3703 47.5 94.9776ZM47.5 7.93537C57.7293 7.54133 67.6886 11.4827 75.1994 18.8972C82.7101 26.3117 87.1609 36.5959 87.5781 47.5C87.1609 58.4041 82.7101 68.6883 75.1994 76.1028C67.6886 83.5174 57.7293 87.4587 47.5 87.0646C37.2707 87.4587 27.3114 83.5174 19.8006 76.1028C12.2899 68.6883 7.83908 58.4041 7.42188 47.5C7.83908 36.5959 12.2899 26.3117 19.8006 18.8972C27.3114 11.4827 37.2707 7.54133 47.5 7.93537Z"
          fill="#EFBD8E" />
      </svg>

    </div>

    <h2 class="text-xl font-bold mb-2">Confirmation</h2>

    <p class="text-sm text-gray-600 mb-8">
      √ätes-vous s√ªr de vouloir <b>activer</b> ce compte ?
    </p>

    <div class="flex justify-center gap-4">
      <button (click)="confirmActivate()" class="bg-green-600 text-white px-8 py-3 rounded-lg">
        Activer
      </button>

      <button (click)="closeActivate()" class="bg-gray-100 px-8 py-3 rounded-lg">
        Annuler
      </button>
    </div>

  </div>
</div>




<!-- POPUP D√âSACTIVER -->
<div *ngIf="showDeactivatePopup" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50">
  <div class="bg-white rounded-2xl px-10 py-12 w-[460px] text-center shadow-xl">

    <div class="w-16 h-16 mx-auto mb-6 flex items-center justify-center">
      <svg width="95" height="95" viewBox="0 0 95 95" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M51.2407 58.166L43.8188 58.166L43.8188 28.4785L51.2407 28.4785L51.2407 58.166Z" fill="#EFBD8E" />
        <path
          d="M47.5 65.291C45.3685 65.291 43.6406 67.0189 43.6406 69.1504C43.6406 71.2819 45.3685 73.0098 47.5 73.0098C49.6315 73.0098 51.3594 71.2819 51.3594 69.1504C51.3594 67.0189 49.6315 65.291 47.5 65.291Z"
          fill="#EFBD8E" />
        <path
          d="M47.5 94.9776C59.6972 95.3703 71.5436 90.595 80.446 81.6968C89.3483 72.7986 94.5815 60.5025 95 47.5C94.5815 34.4975 89.3483 22.2014 80.446 13.3032C71.5436 4.40504 59.6972 -0.370316 47.5 0.0224457C35.3028 -0.370316 23.4564 4.40504 14.554 13.3032C5.65166 22.2014 0.418472 34.4975 0 47.5C0.418472 60.5025 5.65166 72.7986 14.554 81.6968C23.4564 90.595 35.3028 95.3703 47.5 94.9776ZM47.5 7.93537C57.7293 7.54133 67.6886 11.4827 75.1994 18.8972C82.7101 26.3117 87.1609 36.5959 87.5781 47.5C87.1609 58.4041 82.7101 68.6883 75.1994 76.1028C67.6886 83.5174 57.7293 87.4587 47.5 87.0646C37.2707 87.4587 27.3114 83.5174 19.8006 76.1028C12.2899 68.6883 7.83908 58.4041 7.42188 47.5C7.83908 36.5959 12.2899 26.3117 19.8006 18.8972C27.3114 11.4827 37.2707 7.54133 47.5 7.93537Z"
          fill="#EFBD8E" />
      </svg>
    </div>

    <h2 class="text-xl font-bold mb-2">Confirmation</h2>

    <p class="text-sm text-gray-600 mb-8">
      √ätes-vous s√ªr de vouloir <b>d√©sactiver</b> ce compte ?
    </p>

    <div class="flex justify-center gap-4">
      <button (click)="confirmDeactivate()" class="bg-orange-600 text-white px-8 py-3 rounded-lg">
        D√©sactiver
      </button>

      <button (click)="closeDeactivate()" class="bg-gray-100 px-8 py-3 rounded-lg">
        Annuler
      </button>
    </div>

  </div>
</div>



<!-- SUCCESS ACTIVER
<div
  *ngIf="showSuccessActivate"
  class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
>
  <div class="bg-white rounded-2xl shadow-xl px-10 py-12 w-[460px] text-center">

    <div class="w-20 h-20 mx-auto mb-6 flex items-center justify-center ">
      <svg width="95" height="95" viewBox="0 0 95 95" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M70.2452 34.0264C70.9106 34.7294 71.27 35.6677 71.2443 36.6353C71.2186 37.6029 70.81 38.5208 70.1082 39.1875L43.3438 64.7644C42.6518 65.4153 41.736 65.7751 40.7861 65.7692C39.8501 65.7728 38.9494 65.4125 38.2741 64.7644L24.8918 51.976C24.5207 51.6521 24.2188 51.2566 24.0044 50.8131C23.79 50.3696 23.6675 49.8874 23.6442 49.3954C23.6209 48.9033 23.6973 48.4117 23.8689 47.9499C24.0405 47.4882 24.3037 47.0659 24.6426 46.7085C24.9816 46.3511 25.3893 46.0659 25.8413 45.87C26.2932 45.6742 26.7801 45.5718 27.2727 45.5689C27.7653 45.566 28.2534 45.6628 28.7076 45.8534C29.1618 46.044 29.5728 46.3244 29.9159 46.6779L40.7861 57.0457L65.0841 33.8894C65.7871 33.224 66.7254 32.8646 67.693 32.8903C68.6606 32.916 69.5785 33.3246 70.2452 34.0264ZM95 47.5C95 56.8946 92.2142 66.0782 86.9948 73.8896C81.7754 81.7009 74.357 87.7891 65.6775 91.3843C56.998 94.9794 47.4473 95.9201 38.2332 94.0873C29.0191 92.2545 20.5554 87.7305 13.9124 81.0876C7.26945 74.4446 2.74552 65.9809 0.91272 56.7668C-0.920077 47.5527 0.020581 38.002 3.61574 29.3225C7.2109 20.643 13.2991 13.2246 21.1104 8.00519C28.9218 2.78583 38.1054 0 47.5 0C60.0904 0.0241427 72.1582 5.03635 81.0609 13.9391C89.9637 22.8418 94.9759 34.9096 95 47.5ZM87.6923 47.5C87.6923 39.5507 85.3351 31.7799 80.9187 25.1703C76.5023 18.5608 70.2251 13.4092 62.8809 10.3671C55.5368 7.32509 47.4554 6.52915 39.6589 8.07997C31.8623 9.6308 24.7008 13.4587 19.0798 19.0797C13.4588 24.7007 9.63082 31.8623 8.08 39.6589C6.52917 47.4554 7.32511 55.5367 10.3672 62.8809C13.4092 70.2251 18.5608 76.5023 25.1704 80.9187C31.78 85.3351 39.5507 87.6923 47.5 87.6923C58.156 87.6802 68.372 83.4418 75.9069 75.9069C83.4418 68.372 87.6802 58.1559 87.6923 47.5Z" fill="#008D36"/>
</svg>

    </div>

    <p class="text-lg text-gray-700">
      Compte <b>‚Äú{{ selectedUser?.nom }}‚Äù</b> a √©t√© activ√©.
    </p>

  </div>
</div>


-->



<!-- SUCCESS D√âSACTIVER
<div
  *ngIf="showSuccessDeactivate"
  class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
>
  <div class="bg-white rounded-2xl shadow-xl px-10 py-12 w-[460px] text-center">

    <div class="w-20 h-20 mx-auto mb-6 flex items-center justify-center ">
      <svg width="95" height="95" viewBox="0 0 95 95" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M70.2452 34.0264C70.9106 34.7294 71.27 35.6677 71.2443 36.6353C71.2186 37.6029 70.81 38.5208 70.1082 39.1875L43.3438 64.7644C42.6518 65.4153 41.736 65.7751 40.7861 65.7692C39.8501 65.7728 38.9494 65.4125 38.2741 64.7644L24.8918 51.976C24.5207 51.6521 24.2188 51.2566 24.0044 50.8131C23.79 50.3696 23.6675 49.8874 23.6442 49.3954C23.6209 48.9033 23.6973 48.4117 23.8689 47.9499C24.0405 47.4882 24.3037 47.0659 24.6426 46.7085C24.9816 46.3511 25.3893 46.0659 25.8413 45.87C26.2932 45.6742 26.7801 45.5718 27.2727 45.5689C27.7653 45.566 28.2534 45.6628 28.7076 45.8534C29.1618 46.044 29.5728 46.3244 29.9159 46.6779L40.7861 57.0457L65.0841 33.8894C65.7871 33.224 66.7254 32.8646 67.693 32.8903C68.6606 32.916 69.5785 33.3246 70.2452 34.0264ZM95 47.5C95 56.8946 92.2142 66.0782 86.9948 73.8896C81.7754 81.7009 74.357 87.7891 65.6775 91.3843C56.998 94.9794 47.4473 95.9201 38.2332 94.0873C29.0191 92.2545 20.5554 87.7305 13.9124 81.0876C7.26945 74.4446 2.74552 65.9809 0.91272 56.7668C-0.920077 47.5527 0.020581 38.002 3.61574 29.3225C7.2109 20.643 13.2991 13.2246 21.1104 8.00519C28.9218 2.78583 38.1054 0 47.5 0C60.0904 0.0241427 72.1582 5.03635 81.0609 13.9391C89.9637 22.8418 94.9759 34.9096 95 47.5ZM87.6923 47.5C87.6923 39.5507 85.3351 31.7799 80.9187 25.1703C76.5023 18.5608 70.2251 13.4092 62.8809 10.3671C55.5368 7.32509 47.4554 6.52915 39.6589 8.07997C31.8623 9.6308 24.7008 13.4587 19.0798 19.0797C13.4588 24.7007 9.63082 31.8623 8.08 39.6589C6.52917 47.4554 7.32511 55.5367 10.3672 62.8809C13.4092 70.2251 18.5608 76.5023 25.1704 80.9187C31.78 85.3351 39.5507 87.6923 47.5 87.6923C58.156 87.6802 68.372 83.4418 75.9069 75.9069C83.4418 68.372 87.6802 58.1559 87.6923 47.5Z" fill="#008D36"/>
</svg>

    </div>

    <p class="text-lg text-gray-700">
      Compte <b>‚Äú{{ selectedUser?.nom }}‚Äù</b> a √©t√© d√©sactiv√©.
    </p>

  </div>
</div>
-->